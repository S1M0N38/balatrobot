
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A bot framework for Balatro">
      
      
        <meta name="author" content="S1M0N38">
      
      
        <link rel="canonical" href="https://coder.github.io/balatrobot/balatrobot-api/">
      
      
        <link rel="prev" href="../developing-bots/">
      
      
        <link rel="next" href="../protocol-api/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>BalatroBot API - BalatroBot</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="black">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#balatrobot-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="BalatroBot" class="md-header__button md-logo" aria-label="BalatroBot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BalatroBot
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              BalatroBot API
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="black"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/coder/balatrobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    coder/balatrobot
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="BalatroBot" class="md-nav__button md-logo" aria-label="BalatroBot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    BalatroBot
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/coder/balatrobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    coder/balatrobot
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../developing-bots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing Bots
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    BalatroBot API
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    BalatroBot API
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    <span class="md-ellipsis">
      Client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#balatrobot.client.BalatroClient" class="md-nav__link">
    <span class="md-ellipsis">
      BalatroClient
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enums" class="md-nav__link">
    <span class="md-ellipsis">
      Enums
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enums">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.State" class="md-nav__link">
    <span class="md-ellipsis">
      State
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.Actions" class="md-nav__link">
    <span class="md-ellipsis">
      Actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.Decks" class="md-nav__link">
    <span class="md-ellipsis">
      Decks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.Stakes" class="md-nav__link">
    <span class="md-ellipsis">
      Stakes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.ErrorCode" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorCode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Exceptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connection-and-socket-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Connection and Socket Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#game-state-and-logic-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Game State and Logic Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-and-parameter-errors" class="md-nav__link">
    <span class="md-ellipsis">
      API and Parameter Errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-models" class="md-nav__link">
    <span class="md-ellipsis">
      Request Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#game-state-models" class="md-nav__link">
    <span class="md-ellipsis">
      Game State Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#communication-models" class="md-nav__link">
    <span class="md-ellipsis">
      Communication Models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../protocol-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Protocol API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging-systems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging Systems
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    <span class="md-ellipsis">
      Client
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#balatrobot.client.BalatroClient" class="md-nav__link">
    <span class="md-ellipsis">
      BalatroClient
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enums" class="md-nav__link">
    <span class="md-ellipsis">
      Enums
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enums">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.State" class="md-nav__link">
    <span class="md-ellipsis">
      State
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.Actions" class="md-nav__link">
    <span class="md-ellipsis">
      Actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.Decks" class="md-nav__link">
    <span class="md-ellipsis">
      Decks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.Stakes" class="md-nav__link">
    <span class="md-ellipsis">
      Stakes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#balatrobot.enums.ErrorCode" class="md-nav__link">
    <span class="md-ellipsis">
      ErrorCode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Exceptions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connection-and-socket-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Connection and Socket Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#game-state-and-logic-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Game State and Logic Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-and-parameter-errors" class="md-nav__link">
    <span class="md-ellipsis">
      API and Parameter Errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-models" class="md-nav__link">
    <span class="md-ellipsis">
      Request Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#game-state-models" class="md-nav__link">
    <span class="md-ellipsis">
      Game State Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#communication-models" class="md-nav__link">
    <span class="md-ellipsis">
      Communication Models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Usage Examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="balatrobot-api">BalatroBot API</h1>
<p>This page provides comprehensive API documentation for the BalatroBot Python framework. The API enables you to build automated bots that interact with the Balatro card game through a structured TCP communication protocol.</p>
<p>The API is organized into several key components: the <code>BalatroClient</code> for managing game connections and sending commands, enums that define game states and actions, exception classes for robust error handling, and data models that structure requests and responses between your bot and the game.</p>
<h2 id="client">Client</h2>
<p>The <code>BalatroClient</code> is the main interface for communicating with the Balatro game through TCP connections. It handles connection management, message serialization, and error handling.</p>


<div class="doc doc-object doc-class">



<h3 id="balatrobot.client.BalatroClient" class="doc doc-heading">
            <code>balatrobot.client.BalatroClient</code>


</h3>


    <div class="doc doc-contents first">


        <p>Client for communicating with the BalatroBot game API.</p>
<p>The client provides methods for game control, state management, and development tools
including a checkpointing system for saving and loading game states.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="balatrobot.client.BalatroClient.host">host</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Host address to connect to</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="balatrobot.client.BalatroClient.port">port</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Port number to connect to</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="balatrobot.client.BalatroClient.timeout">timeout</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Socket timeout in seconds</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="balatrobot.client.BalatroClient.buffer_size">buffer_size</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Socket buffer size in bytes</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="balatrobot.client.BalatroClient._socket">_socket</span></code></td>
            <td>
                  <code><span title="socket.socket">socket</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Socket connection to BalatroBot</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>src/balatrobot/client.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-24"><span class="k">class</span><span class="w"> </span><span class="nc">BalatroClient</span><span class="p">:</span>
</span><span id="__span-0-25"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Client for communicating with the BalatroBot game API.</span>
</span><span id="__span-0-26">
</span><span id="__span-0-27"><span class="sd">    The client provides methods for game control, state management, and development tools</span>
</span><span id="__span-0-28"><span class="sd">    including a checkpointing system for saving and loading game states.</span>
</span><span id="__span-0-29">
</span><span id="__span-0-30"><span class="sd">    Attributes:</span>
</span><span id="__span-0-31"><span class="sd">        host: Host address to connect to</span>
</span><span id="__span-0-32"><span class="sd">        port: Port number to connect to</span>
</span><span id="__span-0-33"><span class="sd">        timeout: Socket timeout in seconds</span>
</span><span id="__span-0-34"><span class="sd">        buffer_size: Socket buffer size in bytes</span>
</span><span id="__span-0-35"><span class="sd">        _socket: Socket connection to BalatroBot</span>
</span><span id="__span-0-36"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-37">
</span><span id="__span-0-38">    <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span>
</span><span id="__span-0-39">    <span class="n">timeout</span> <span class="o">=</span> <span class="mf">300.0</span>
</span><span id="__span-0-40">    <span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">65536</span>
</span><span id="__span-0-41">
</span><span id="__span-0-42">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12346</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="__span-0-43"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize BalatroBot client</span>
</span><span id="__span-0-44">
</span><span id="__span-0-45"><span class="sd">        Args:</span>
</span><span id="__span-0-46"><span class="sd">            port: Port number to connect to (default: 12346)</span>
</span><span id="__span-0-47"><span class="sd">            timeout: Socket timeout in seconds (default: 300.0)</span>
</span><span id="__span-0-48"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-49">        <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
</span><span id="__span-0-50">        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
</span><span id="__span-0-51">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-52">        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-0-53">        <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>  <span class="c1"># Buffer for incomplete messages</span>
</span><span id="__span-0-54">
</span><span id="__span-0-55">    <span class="k">def</span><span class="w"> </span><span class="nf">_receive_complete_message</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span id="__span-0-56"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive a complete message from the socket, handling message boundaries properly.&quot;&quot;&quot;</span>
</span><span id="__span-0-57">        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
</span><span id="__span-0-58">            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-59">                <span class="s2">&quot;Socket not connected&quot;</span><span class="p">,</span>
</span><span id="__span-0-60">                <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-61">                <span class="n">context</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-0-62">                    <span class="s2">&quot;connected&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span><span class="p">,</span>
</span><span id="__span-0-63">                    <span class="s2">&quot;socket&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-64">                <span class="p">},</span>
</span><span id="__span-0-65">            <span class="p">)</span>
</span><span id="__span-0-66">
</span><span id="__span-0-67">        <span class="c1"># Check if we already have a complete message in the buffer</span>
</span><span id="__span-0-68">        <span class="k">while</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">:</span>
</span><span id="__span-0-69">            <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-70">                <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer_size</span><span class="p">)</span>
</span><span id="__span-0-71">            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
</span><span id="__span-0-72">                <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-73">                    <span class="s2">&quot;Socket timeout while receiving data&quot;</span><span class="p">,</span>
</span><span id="__span-0-74">                    <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-75">                    <span class="n">context</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-0-76">                        <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span>
</span><span id="__span-0-77">                        <span class="s2">&quot;buffer_size&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">),</span>
</span><span id="__span-0-78">                    <span class="p">},</span>
</span><span id="__span-0-79">                <span class="p">)</span>
</span><span id="__span-0-80">            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-81">                <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-82">                    <span class="sa">f</span><span class="s2">&quot;Socket error while receiving: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-83">                    <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-84">                    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;buffer_size&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">)},</span>
</span><span id="__span-0-85">                <span class="p">)</span>
</span><span id="__span-0-86">
</span><span id="__span-0-87">            <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
</span><span id="__span-0-88">                <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-89">                    <span class="s2">&quot;Connection closed by server&quot;</span><span class="p">,</span>
</span><span id="__span-0-90">                    <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-91">                    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;buffer_size&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">)},</span>
</span><span id="__span-0-92">                <span class="p">)</span>
</span><span id="__span-0-93">            <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span> <span class="o">+=</span> <span class="n">chunk</span>
</span><span id="__span-0-94">
</span><span id="__span-0-95">        <span class="c1"># Extract the first complete message</span>
</span><span id="__span-0-96">        <span class="n">message_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-97">        <span class="n">complete_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">[:</span><span class="n">message_end</span><span class="p">]</span>
</span><span id="__span-0-98">
</span><span id="__span-0-99">        <span class="c1"># Update buffer to remove the processed message</span>
</span><span id="__span-0-100">        <span class="n">remaining_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">[</span><span class="n">message_end</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>
</span><span id="__span-0-101">        <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span> <span class="o">=</span> <span class="n">remaining_data</span>
</span><span id="__span-0-102">
</span><span id="__span-0-103">        <span class="c1"># Log any remaining data for debugging</span>
</span><span id="__span-0-104">        <span class="k">if</span> <span class="n">remaining_data</span><span class="p">:</span>
</span><span id="__span-0-105">            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data remaining in buffer: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">remaining_data</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>
</span><span id="__span-0-106">            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Buffer preview: </span><span class="si">{</span><span class="n">remaining_data</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-0-107">
</span><span id="__span-0-108">        <span class="k">return</span> <span class="n">complete_message</span>
</span><span id="__span-0-109">
</span><span id="__span-0-110">    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-0-111"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Enter context manager and connect to the game.&quot;&quot;&quot;</span>
</span><span id="__span-0-112">        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</span><span id="__span-0-113">        <span class="k">return</span> <span class="bp">self</span>
</span><span id="__span-0-114">
</span><span id="__span-0-115">    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-116"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Exit context manager and disconnect from the game.&quot;&quot;&quot;</span>
</span><span id="__span-0-117">        <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</span><span id="__span-0-118">
</span><span id="__span-0-119">    <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-120"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Connect to Balatro TCP server</span>
</span><span id="__span-0-121">
</span><span id="__span-0-122"><span class="sd">        Raises:</span>
</span><span id="__span-0-123"><span class="sd">            ConnectionFailedError: If not connected to the game</span>
</span><span id="__span-0-124"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-125">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span><span class="p">:</span>
</span><span id="__span-0-126">            <span class="k">return</span>
</span><span id="__span-0-127">
</span><span id="__span-0-128">        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connecting to BalatroBot API at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-129">        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-130">            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-0-131">            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="__span-0-132">            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span>
</span><span id="__span-0-133">                <span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_RCVBUF</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer_size</span>
</span><span id="__span-0-134">            <span class="p">)</span>
</span><span id="__span-0-135">            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">))</span>
</span><span id="__span-0-136">            <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-0-137">            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
</span><span id="__span-0-138">                <span class="sa">f</span><span class="s2">&quot;Successfully connected to BalatroBot API at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-139">            <span class="p">)</span>
</span><span id="__span-0-140">        <span class="k">except</span> <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-141">            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to connect to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-142">            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-143">                <span class="sa">f</span><span class="s2">&quot;Failed to connect to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-144">                <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-145">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-146">            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-147">
</span><span id="__span-0-148">    <span class="k">def</span><span class="w"> </span><span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-149"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Disconnect from the BalatroBot game API.&quot;&quot;&quot;</span>
</span><span id="__span-0-150">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
</span><span id="__span-0-151">            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Disconnecting from BalatroBot API at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-152">            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-153">            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-154">        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-0-155">        <span class="c1"># Clear message buffer on disconnect</span>
</span><span id="__span-0-156">        <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-0-157">
</span><span id="__span-0-158">    <span class="k">def</span><span class="w"> </span><span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-159"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Send JSON message to Balatro and receive response</span>
</span><span id="__span-0-160">
</span><span id="__span-0-161"><span class="sd">        Args:</span>
</span><span id="__span-0-162"><span class="sd">            name: Function name to call</span>
</span><span id="__span-0-163"><span class="sd">            arguments: Function arguments</span>
</span><span id="__span-0-164">
</span><span id="__span-0-165"><span class="sd">        Returns:</span>
</span><span id="__span-0-166"><span class="sd">            Response from the game API</span>
</span><span id="__span-0-167">
</span><span id="__span-0-168"><span class="sd">        Raises:</span>
</span><span id="__span-0-169"><span class="sd">            ConnectionFailedError: If not connected to the game</span>
</span><span id="__span-0-170"><span class="sd">            BalatroError: If the API returns an error</span>
</span><span id="__span-0-171"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-172">        <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-173">            <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-174">
</span><span id="__span-0-175">        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
</span><span id="__span-0-176">            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-177">                <span class="s2">&quot;Not connected to the game API&quot;</span><span class="p">,</span>
</span><span id="__span-0-178">                <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-179">                <span class="n">context</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-0-180">                    <span class="s2">&quot;connected&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span><span class="p">,</span>
</span><span id="__span-0-181">                    <span class="s2">&quot;socket&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-182">                <span class="p">},</span>
</span><span id="__span-0-183">            <span class="p">)</span>
</span><span id="__span-0-184">
</span><span id="__span-0-185">        <span class="c1"># Create and validate request</span>
</span><span id="__span-0-186">        <span class="n">request</span> <span class="o">=</span> <span class="n">APIRequest</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">)</span>
</span><span id="__span-0-187">        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending API request: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-188">
</span><span id="__span-0-189">        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-190">            <span class="c1"># Start timing measurement</span>
</span><span id="__span-0-191">            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
</span><span id="__span-0-192">
</span><span id="__span-0-193">            <span class="c1"># Send request</span>
</span><span id="__span-0-194">            <span class="n">message</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-0-195">            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="__span-0-196">
</span><span id="__span-0-197">            <span class="c1"># Receive response using improved message handling</span>
</span><span id="__span-0-198">            <span class="n">complete_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receive_complete_message</span><span class="p">()</span>
</span><span id="__span-0-199">
</span><span id="__span-0-200">            <span class="c1"># Decode and validate the message</span>
</span><span id="__span-0-201">            <span class="n">message_str</span> <span class="o">=</span> <span class="n">complete_message</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-0-202">            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw message length: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">message_str</span><span class="p">)</span><span class="si">}</span><span class="s2"> characters&quot;</span><span class="p">)</span>
</span><span id="__span-0-203">            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message preview: </span><span class="si">{</span><span class="n">message_str</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-0-204">
</span><span id="__span-0-205">            <span class="c1"># Ensure the message is properly formatted JSON</span>
</span><span id="__span-0-206">            <span class="k">if</span> <span class="ow">not</span> <span class="n">message_str</span><span class="p">:</span>
</span><span id="__span-0-207">                <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-208">                    <span class="s2">&quot;Empty response received from game&quot;</span><span class="p">,</span>
</span><span id="__span-0-209">                    <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E001&quot;</span><span class="p">,</span>
</span><span id="__span-0-210">                    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;raw_data_length&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">complete_message</span><span class="p">)},</span>
</span><span id="__span-0-211">                <span class="p">)</span>
</span><span id="__span-0-212">
</span><span id="__span-0-213">            <span class="n">response_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message_str</span><span class="p">)</span>
</span><span id="__span-0-214">
</span><span id="__span-0-215">            <span class="c1"># Check for error response</span>
</span><span id="__span-0-216">            <span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">response_data</span><span class="p">:</span>
</span><span id="__span-0-217">                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">response_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-218">                <span class="k">raise</span> <span class="n">create_exception_from_error_response</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>
</span><span id="__span-0-219">
</span><span id="__span-0-220">            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> completed successfully&quot;</span><span class="p">)</span>
</span><span id="__span-0-221">            <span class="k">return</span> <span class="n">response_data</span>
</span><span id="__span-0-222">
</span><span id="__span-0-223">        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-224">            <span class="c1"># Calculate elapsed time and log timeout</span>
</span><span id="__span-0-225">            <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-0-226">            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="__span-0-227">                <span class="sa">f</span><span class="s2">&quot;Timeout on API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: took </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s, &quot;</span>
</span><span id="__span-0-228">                <span class="sa">f</span><span class="s2">&quot;exceeded timeout of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="si">}</span><span class="s2">s (port: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="__span-0-229">            <span class="p">)</span>
</span><span id="__span-0-230">            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-231">                <span class="sa">f</span><span class="s2">&quot;Socket timeout during communication: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-232">                <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-233">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;elapsed_time&quot;</span><span class="p">:</span> <span class="n">elapsed_time</span><span class="p">},</span>
</span><span id="__span-0-234">            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-235">        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-236">            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Socket error during API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-237">            <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-238">                <span class="sa">f</span><span class="s2">&quot;Socket error during communication: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-239">                <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-240">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-241">            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-242">        <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-243">            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid JSON response from API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-244">            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Problematic message content: </span><span class="si">{</span><span class="n">message_str</span><span class="p">[:</span><span class="mi">200</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-0-245">            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="__span-0-246">                <span class="sa">f</span><span class="s2">&quot;Message buffer state: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes remaining&quot;</span>
</span><span id="__span-0-247">            <span class="p">)</span>
</span><span id="__span-0-248">
</span><span id="__span-0-249">            <span class="c1"># Clear the message buffer to prevent cascading errors</span>
</span><span id="__span-0-250">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">:</span>
</span><span id="__span-0-251">                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Clearing message buffer due to JSON parse error&quot;</span><span class="p">)</span>
</span><span id="__span-0-252">                <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-0-253">
</span><span id="__span-0-254">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-255">                <span class="sa">f</span><span class="s2">&quot;Invalid JSON response from game: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-256">                <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E001&quot;</span><span class="p">,</span>
</span><span id="__span-0-257">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;message_preview&quot;</span><span class="p">:</span> <span class="n">message_str</span><span class="p">[:</span><span class="mi">100</span><span class="p">]},</span>
</span><span id="__span-0-258">            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-259">
</span><span id="__span-0-260">    <span class="c1"># Checkpoint Management Methods</span>
</span><span id="__span-0-261">
</span><span id="__span-0-262">    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_windows_path_to_linux</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">windows_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-263"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert Windows path to Linux Steam Proton path if on Linux.</span>
</span><span id="__span-0-264">
</span><span id="__span-0-265"><span class="sd">        Args:</span>
</span><span id="__span-0-266"><span class="sd">            windows_path: Windows-style path (e.g., &quot;C:/Users/.../Balatro/3/save.jkr&quot;)</span>
</span><span id="__span-0-267">
</span><span id="__span-0-268"><span class="sd">        Returns:</span>
</span><span id="__span-0-269"><span class="sd">            Converted path for Linux or original path for other platforms</span>
</span><span id="__span-0-270"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-271">
</span><span id="__span-0-272">        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Linux&quot;</span><span class="p">:</span>
</span><span id="__span-0-273">            <span class="c1"># Match Windows drive letter and path (e.g., &quot;C:/...&quot;, &quot;D:\\...&quot;, &quot;E:...&quot;)</span>
</span><span id="__span-0-274">            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^([A-Z]):[</span><span class="se">\\</span><span class="s2">/]*(.*)&quot;</span><span class="p">,</span> <span class="n">windows_path</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
</span><span id="__span-0-275">            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
</span><span id="__span-0-276">                <span class="c1"># Replace drive letter with Linux Steam Proton prefix</span>
</span><span id="__span-0-277">                <span class="n">linux_prefix</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
</span><span id="__span-0-278">                    <span class="n">Path</span><span class="p">(</span>
</span><span id="__span-0-279">                        <span class="s2">&quot;~/.steam/steam/steamapps/compatdata/2379780/pfx/drive_c&quot;</span>
</span><span id="__span-0-280">                    <span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="__span-0-281">                <span class="p">)</span>
</span><span id="__span-0-282">                <span class="c1"># Normalize slashes and join with prefix</span>
</span><span id="__span-0-283">                <span class="n">rest_of_path</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</span><span id="__span-0-284">                <span class="k">return</span> <span class="n">linux_prefix</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">rest_of_path</span>
</span><span id="__span-0-285">
</span><span id="__span-0-286">        <span class="k">return</span> <span class="n">windows_path</span>
</span><span id="__span-0-287">
</span><span id="__span-0-288">    <span class="k">def</span><span class="w"> </span><span class="nf">get_save_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-289"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current save file location and profile information.</span>
</span><span id="__span-0-290">
</span><span id="__span-0-291"><span class="sd">        Development tool for working with save files and checkpoints.</span>
</span><span id="__span-0-292">
</span><span id="__span-0-293"><span class="sd">        Returns:</span>
</span><span id="__span-0-294"><span class="sd">            Dictionary containing:</span>
</span><span id="__span-0-295"><span class="sd">            - profile_path: Current profile path (e.g., &quot;3&quot;)</span>
</span><span id="__span-0-296"><span class="sd">            - save_directory: Full path to Love2D save directory</span>
</span><span id="__span-0-297"><span class="sd">            - save_file_path: Full OS-specific path to save.jkr file</span>
</span><span id="__span-0-298"><span class="sd">            - has_active_run: Whether a run is currently active</span>
</span><span id="__span-0-299"><span class="sd">            - save_exists: Whether the save file exists</span>
</span><span id="__span-0-300">
</span><span id="__span-0-301"><span class="sd">        Raises:</span>
</span><span id="__span-0-302"><span class="sd">            BalatroError: If request fails</span>
</span><span id="__span-0-303">
</span><span id="__span-0-304"><span class="sd">        Note:</span>
</span><span id="__span-0-305"><span class="sd">            This is primarily for development and testing purposes.</span>
</span><span id="__span-0-306"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-307">        <span class="n">save_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">&quot;get_save_info&quot;</span><span class="p">)</span>
</span><span id="__span-0-308">
</span><span id="__span-0-309">        <span class="c1"># Convert Windows paths to Linux Steam Proton paths if needed</span>
</span><span id="__span-0-310">        <span class="k">if</span> <span class="s2">&quot;save_file_path&quot;</span> <span class="ow">in</span> <span class="n">save_info</span> <span class="ow">and</span> <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">]:</span>
</span><span id="__span-0-311">            <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_windows_path_to_linux</span><span class="p">(</span>
</span><span id="__span-0-312">                <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">]</span>
</span><span id="__span-0-313">            <span class="p">)</span>
</span><span id="__span-0-314">        <span class="k">if</span> <span class="s2">&quot;save_directory&quot;</span> <span class="ow">in</span> <span class="n">save_info</span> <span class="ow">and</span> <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">]:</span>
</span><span id="__span-0-315">            <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_windows_path_to_linux</span><span class="p">(</span>
</span><span id="__span-0-316">                <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">]</span>
</span><span id="__span-0-317">            <span class="p">)</span>
</span><span id="__span-0-318">
</span><span id="__span-0-319">        <span class="k">return</span> <span class="n">save_info</span>
</span><span id="__span-0-320">
</span><span id="__span-0-321">    <span class="k">def</span><span class="w"> </span><span class="nf">save_checkpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkpoint_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="__span-0-322"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the current save.jkr file as a checkpoint.</span>
</span><span id="__span-0-323">
</span><span id="__span-0-324"><span class="sd">        Args:</span>
</span><span id="__span-0-325"><span class="sd">            checkpoint_name: Either:</span>
</span><span id="__span-0-326"><span class="sd">                - A checkpoint name (saved to checkpoints dir)</span>
</span><span id="__span-0-327"><span class="sd">                - A full file path where the checkpoint should be saved</span>
</span><span id="__span-0-328"><span class="sd">                - A directory path (checkpoint will be saved as &#39;save.jkr&#39; inside it)</span>
</span><span id="__span-0-329">
</span><span id="__span-0-330"><span class="sd">        Returns:</span>
</span><span id="__span-0-331"><span class="sd">            Path to the saved checkpoint file</span>
</span><span id="__span-0-332">
</span><span id="__span-0-333"><span class="sd">        Raises:</span>
</span><span id="__span-0-334"><span class="sd">            BalatroError: If no save file exists or the destination path is invalid</span>
</span><span id="__span-0-335"><span class="sd">            IOError: If file operations fail</span>
</span><span id="__span-0-336"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-337">        <span class="c1"># Get current save info</span>
</span><span id="__span-0-338">        <span class="n">save_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_save_info</span><span class="p">()</span>
</span><span id="__span-0-339">        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;save_exists&quot;</span><span class="p">):</span>
</span><span id="__span-0-340">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-341">                <span class="s2">&quot;No save file exists to checkpoint&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_GAME_STATE</span>
</span><span id="__span-0-342">            <span class="p">)</span>
</span><span id="__span-0-343">
</span><span id="__span-0-344">        <span class="c1"># Get the full save file path from API (already OS-specific)</span>
</span><span id="__span-0-345">        <span class="n">save_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">])</span>
</span><span id="__span-0-346">        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="__span-0-347">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-348">                <span class="sa">f</span><span class="s2">&quot;Save file not found: </span><span class="si">{</span><span class="n">save_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">MISSING_GAME_OBJECT</span>
</span><span id="__span-0-349">            <span class="p">)</span>
</span><span id="__span-0-350">
</span><span id="__span-0-351">        <span class="c1"># Normalize and interpret destination</span>
</span><span id="__span-0-352">        <span class="n">dest</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">checkpoint_name</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="__span-0-353">        <span class="c1"># Treat paths without a .jkr suffix as directories</span>
</span><span id="__span-0-354">        <span class="k">if</span> <span class="n">dest</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;.jkr&quot;</span><span class="p">:</span>
</span><span id="__span-0-355">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-356">                <span class="sa">f</span><span class="s2">&quot;Invalid checkpoint path provided: </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-357">                <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_PARAMETER</span><span class="p">,</span>
</span><span id="__span-0-358">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dest</span><span class="p">),</span> <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="s2">&quot;Path does not end with .jkr&quot;</span><span class="p">},</span>
</span><span id="__span-0-359">            <span class="p">)</span>
</span><span id="__span-0-360">
</span><span id="__span-0-361">        <span class="c1"># Ensure destination directory exists</span>
</span><span id="__span-0-362">        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-363">            <span class="n">dest</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-364">        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-365">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-366">                <span class="sa">f</span><span class="s2">&quot;Invalid checkpoint path provided: </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-367">                <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_PARAMETER</span><span class="p">,</span>
</span><span id="__span-0-368">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dest</span><span class="p">),</span> <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-369">            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-370">
</span><span id="__span-0-371">        <span class="c1"># Copy save file to checkpoint</span>
</span><span id="__span-0-372">        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-373">            <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
</span><span id="__span-0-374">        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-375">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-376">                <span class="sa">f</span><span class="s2">&quot;Failed to write checkpoint to: </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-377">                <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_PARAMETER</span><span class="p">,</span>
</span><span id="__span-0-378">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dest</span><span class="p">),</span> <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-379">            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-380">
</span><span id="__span-0-381">        <span class="k">return</span> <span class="n">dest</span>
</span><span id="__span-0-382">
</span><span id="__span-0-383">    <span class="k">def</span><span class="w"> </span><span class="nf">prepare_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-384"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare a test save file for use with load_save.</span>
</span><span id="__span-0-385">
</span><span id="__span-0-386"><span class="sd">        This copies a .jkr file from your test directory into Love2D&#39;s save directory</span>
</span><span id="__span-0-387"><span class="sd">        in a temporary profile so it can be loaded with load_save().</span>
</span><span id="__span-0-388">
</span><span id="__span-0-389"><span class="sd">        Args:</span>
</span><span id="__span-0-390"><span class="sd">            source_path: Path to the .jkr save file to prepare</span>
</span><span id="__span-0-391">
</span><span id="__span-0-392"><span class="sd">        Returns:</span>
</span><span id="__span-0-393"><span class="sd">            The Love2D-relative path to use with load_save()</span>
</span><span id="__span-0-394"><span class="sd">            (e.g., &quot;checkpoint/save.jkr&quot;)</span>
</span><span id="__span-0-395">
</span><span id="__span-0-396"><span class="sd">        Raises:</span>
</span><span id="__span-0-397"><span class="sd">            BalatroError: If source file not found</span>
</span><span id="__span-0-398"><span class="sd">            IOError: If file operations fail</span>
</span><span id="__span-0-399"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-400">        <span class="n">source</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">source_path</span><span class="p">)</span>
</span><span id="__span-0-401">        <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="__span-0-402">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-403">                <span class="sa">f</span><span class="s2">&quot;Source save file not found: </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">MISSING_GAME_OBJECT</span>
</span><span id="__span-0-404">            <span class="p">)</span>
</span><span id="__span-0-405">
</span><span id="__span-0-406">        <span class="c1"># Get save directory info</span>
</span><span id="__span-0-407">        <span class="n">save_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_save_info</span><span class="p">()</span>
</span><span id="__span-0-408">        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;save_directory&quot;</span><span class="p">):</span>
</span><span id="__span-0-409">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-410">                <span class="s2">&quot;Cannot determine Love2D save directory&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_GAME_STATE</span>
</span><span id="__span-0-411">            <span class="p">)</span>
</span><span id="__span-0-412">
</span><span id="__span-0-413">        <span class="n">checkpoints_profile</span> <span class="o">=</span> <span class="s2">&quot;checkpoint&quot;</span>
</span><span id="__span-0-414">        <span class="n">save_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">])</span>
</span><span id="__span-0-415">        <span class="n">checkpoints_dir</span> <span class="o">=</span> <span class="n">save_dir</span> <span class="o">/</span> <span class="n">checkpoints_profile</span>
</span><span id="__span-0-416">        <span class="n">checkpoints_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-417">
</span><span id="__span-0-418">        <span class="c1"># Copy the save file to the test profile</span>
</span><span id="__span-0-419">        <span class="n">dest_path</span> <span class="o">=</span> <span class="n">checkpoints_dir</span> <span class="o">/</span> <span class="s2">&quot;save.jkr&quot;</span>
</span><span id="__span-0-420">        <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">)</span>
</span><span id="__span-0-421">
</span><span id="__span-0-422">        <span class="c1"># Return the Love2D-relative path</span>
</span><span id="__span-0-423">        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">checkpoints_profile</span><span class="si">}</span><span class="s2">/save.jkr&quot;</span>
</span><span id="__span-0-424">
</span><span id="__span-0-425">    <span class="k">def</span><span class="w"> </span><span class="nf">load_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-426"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a save file directly without requiring a game restart.</span>
</span><span id="__span-0-427">
</span><span id="__span-0-428"><span class="sd">        This method loads a save file (in Love2D&#39;s save directory format) and starts</span>
</span><span id="__span-0-429"><span class="sd">        a run from that save state. Unlike load_checkpoint which copies to the profile&#39;s</span>
</span><span id="__span-0-430"><span class="sd">        save location and requires restart, this directly loads the save into the game.</span>
</span><span id="__span-0-431">
</span><span id="__span-0-432"><span class="sd">        This is particularly useful for testing as it allows you to quickly jump to</span>
</span><span id="__span-0-433"><span class="sd">        specific game states without manual setup.</span>
</span><span id="__span-0-434">
</span><span id="__span-0-435"><span class="sd">        Args:</span>
</span><span id="__span-0-436"><span class="sd">            save_path: Path to the save file relative to Love2D save directory</span>
</span><span id="__span-0-437"><span class="sd">                      (e.g., &quot;3/save.jkr&quot; for profile 3&#39;s save)</span>
</span><span id="__span-0-438">
</span><span id="__span-0-439"><span class="sd">        Returns:</span>
</span><span id="__span-0-440"><span class="sd">            Game state after loading the save</span>
</span><span id="__span-0-441">
</span><span id="__span-0-442"><span class="sd">        Raises:</span>
</span><span id="__span-0-443"><span class="sd">            BalatroError: If save file not found or loading fails</span>
</span><span id="__span-0-444">
</span><span id="__span-0-445"><span class="sd">        Note:</span>
</span><span id="__span-0-446"><span class="sd">            This is a development tool that bypasses normal game flow.</span>
</span><span id="__span-0-447"><span class="sd">            Use with caution in production bots.</span>
</span><span id="__span-0-448">
</span><span id="__span-0-449"><span class="sd">        Example:</span>
</span><span id="__span-0-450"><span class="sd">            ```python</span>
</span><span id="__span-0-451"><span class="sd">            # Load a profile&#39;s save directly</span>
</span><span id="__span-0-452"><span class="sd">            game_state = client.load_save(&quot;3/save.jkr&quot;)</span>
</span><span id="__span-0-453">
</span><span id="__span-0-454"><span class="sd">            # Or use with prepare_save for external files</span>
</span><span id="__span-0-455"><span class="sd">            save_path = client.prepare_save(&quot;tests/fixtures/shop_state.jkr&quot;)</span>
</span><span id="__span-0-456"><span class="sd">            game_state = client.load_save(save_path)</span>
</span><span id="__span-0-457"><span class="sd">            ```</span>
</span><span id="__span-0-458"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-459">        <span class="c1"># Convert to string if Path object</span>
</span><span id="__span-0-460">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="__span-0-461">            <span class="n">save_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span>
</span><span id="__span-0-462">
</span><span id="__span-0-463">        <span class="c1"># Send load_save request to API</span>
</span><span id="__span-0-464">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">&quot;load_save&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;save_path&quot;</span><span class="p">:</span> <span class="n">save_path</span><span class="p">})</span>
</span><span id="__span-0-465">
</span><span id="__span-0-466">    <span class="k">def</span><span class="w"> </span><span class="nf">load_absolute_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-467"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a save from an absolute path. Takes a full path from the OS as a .jkr file and loads it into the game.</span>
</span><span id="__span-0-468">
</span><span id="__span-0-469"><span class="sd">        Args:</span>
</span><span id="__span-0-470"><span class="sd">            save_path: Path to the save file relative to Love2D save directory</span>
</span><span id="__span-0-471"><span class="sd">                      (e.g., &quot;3/save.jkr&quot; for profile 3&#39;s save)</span>
</span><span id="__span-0-472">
</span><span id="__span-0-473"><span class="sd">        Returns:</span>
</span><span id="__span-0-474"><span class="sd">            Game state after loading the save</span>
</span><span id="__span-0-475"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-476">        <span class="n">love_save_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_save</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span>
</span><span id="__span-0-477">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_save</span><span class="p">(</span><span class="n">love_save_path</span><span class="p">)</span>
</span><span id="__span-0-478">
</span><span id="__span-0-479">    <span class="k">def</span><span class="w"> </span><span class="nf">screenshot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="__span-0-480"><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-481"><span class="sd">        Take a screenshot and save as both PNG and JPEG formats.</span>
</span><span id="__span-0-482">
</span><span id="__span-0-483"><span class="sd">        Args:</span>
</span><span id="__span-0-484"><span class="sd">            path: Optional path for PNG file. If provided, PNG will be moved to this location.</span>
</span><span id="__span-0-485">
</span><span id="__span-0-486"><span class="sd">        Returns:</span>
</span><span id="__span-0-487"><span class="sd">            Path to the PNG screenshot. JPEG is saved alongside with .jpg extension.</span>
</span><span id="__span-0-488">
</span><span id="__span-0-489"><span class="sd">        Note:</span>
</span><span id="__span-0-490"><span class="sd">            The response now includes both &#39;path&#39; (PNG) and &#39;jpeg_path&#39; (JPEG) keys.</span>
</span><span id="__span-0-491"><span class="sd">            This method maintains backward compatibility by returning the PNG path.</span>
</span><span id="__span-0-492"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-493">        <span class="n">screenshot_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">&quot;screenshot&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="__span-0-494">
</span><span id="__span-0-495">        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-496">            <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">screenshot_response</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>
</span><span id="__span-0-497">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-498">            <span class="n">source_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">screenshot_response</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>
</span><span id="__span-0-499">            <span class="n">dest_path</span> <span class="o">=</span> <span class="n">path</span>
</span><span id="__span-0-500">            <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">)</span>
</span><span id="__span-0-501">            <span class="k">return</span> <span class="n">dest_path</span>
</span></code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.connect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connect</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Connect to Balatro TCP server</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="balatrobot.exceptions.ConnectionFailedError" href="#balatrobot.exceptions.ConnectionFailedError">ConnectionFailedError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If not connected to the game</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-119"><span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-120"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Connect to Balatro TCP server</span>
</span><span id="__span-0-121">
</span><span id="__span-0-122"><span class="sd">    Raises:</span>
</span><span id="__span-0-123"><span class="sd">        ConnectionFailedError: If not connected to the game</span>
</span><span id="__span-0-124"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-125">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span><span class="p">:</span>
</span><span id="__span-0-126">        <span class="k">return</span>
</span><span id="__span-0-127">
</span><span id="__span-0-128">    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connecting to BalatroBot API at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-129">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-130">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
</span><span id="__span-0-131">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="__span-0-132">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span>
</span><span id="__span-0-133">            <span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_RCVBUF</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer_size</span>
</span><span id="__span-0-134">        <span class="p">)</span>
</span><span id="__span-0-135">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">))</span>
</span><span id="__span-0-136">        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-0-137">        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
</span><span id="__span-0-138">            <span class="sa">f</span><span class="s2">&quot;Successfully connected to BalatroBot API at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-0-139">        <span class="p">)</span>
</span><span id="__span-0-140">    <span class="k">except</span> <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-141">        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to connect to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-142">        <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-143">            <span class="sa">f</span><span class="s2">&quot;Failed to connect to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-144">            <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-145">            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-146">        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.disconnect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disconnect</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Disconnect from the BalatroBot game API.</p>


            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-148"><span class="k">def</span><span class="w"> </span><span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-149"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Disconnect from the BalatroBot game API.&quot;&quot;&quot;</span>
</span><span id="__span-0-150">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
</span><span id="__span-0-151">        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Disconnecting from BalatroBot API at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-152">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-0-153">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-154">    <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-0-155">    <span class="c1"># Clear message buffer on disconnect</span>
</span><span id="__span-0-156">    <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.get_save_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_save_info</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the current save file location and profile information.</p>
<p>Development tool for working with save files and checkpoints.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary containing:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>profile_path: Current profile path (e.g., "3")</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>save_directory: Full path to Love2D save directory</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>save_file_path: Full OS-specific path to save.jkr file</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>has_active_run: Whether a run is currently active</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>save_exists: Whether the save file exists</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="balatrobot.exceptions.BalatroError">BalatroError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If request fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>This is primarily for development and testing purposes.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-288"><span class="k">def</span><span class="w"> </span><span class="nf">get_save_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-289"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current save file location and profile information.</span>
</span><span id="__span-0-290">
</span><span id="__span-0-291"><span class="sd">    Development tool for working with save files and checkpoints.</span>
</span><span id="__span-0-292">
</span><span id="__span-0-293"><span class="sd">    Returns:</span>
</span><span id="__span-0-294"><span class="sd">        Dictionary containing:</span>
</span><span id="__span-0-295"><span class="sd">        - profile_path: Current profile path (e.g., &quot;3&quot;)</span>
</span><span id="__span-0-296"><span class="sd">        - save_directory: Full path to Love2D save directory</span>
</span><span id="__span-0-297"><span class="sd">        - save_file_path: Full OS-specific path to save.jkr file</span>
</span><span id="__span-0-298"><span class="sd">        - has_active_run: Whether a run is currently active</span>
</span><span id="__span-0-299"><span class="sd">        - save_exists: Whether the save file exists</span>
</span><span id="__span-0-300">
</span><span id="__span-0-301"><span class="sd">    Raises:</span>
</span><span id="__span-0-302"><span class="sd">        BalatroError: If request fails</span>
</span><span id="__span-0-303">
</span><span id="__span-0-304"><span class="sd">    Note:</span>
</span><span id="__span-0-305"><span class="sd">        This is primarily for development and testing purposes.</span>
</span><span id="__span-0-306"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-307">    <span class="n">save_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">&quot;get_save_info&quot;</span><span class="p">)</span>
</span><span id="__span-0-308">
</span><span id="__span-0-309">    <span class="c1"># Convert Windows paths to Linux Steam Proton paths if needed</span>
</span><span id="__span-0-310">    <span class="k">if</span> <span class="s2">&quot;save_file_path&quot;</span> <span class="ow">in</span> <span class="n">save_info</span> <span class="ow">and</span> <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">]:</span>
</span><span id="__span-0-311">        <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_windows_path_to_linux</span><span class="p">(</span>
</span><span id="__span-0-312">            <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">]</span>
</span><span id="__span-0-313">        <span class="p">)</span>
</span><span id="__span-0-314">    <span class="k">if</span> <span class="s2">&quot;save_directory&quot;</span> <span class="ow">in</span> <span class="n">save_info</span> <span class="ow">and</span> <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">]:</span>
</span><span id="__span-0-315">        <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_windows_path_to_linux</span><span class="p">(</span>
</span><span id="__span-0-316">            <span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">]</span>
</span><span id="__span-0-317">        <span class="p">)</span>
</span><span id="__span-0-318">
</span><span id="__span-0-319">    <span class="k">return</span> <span class="n">save_info</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.load_absolute_save" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_absolute_save</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Load a save from an absolute path. Takes a full path from the OS as a .jkr file and loads it into the game.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>save_path</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the save file relative to Love2D save directory
      (e.g., "3/save.jkr" for profile 3's save)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Game state after loading the save</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-466"><span class="k">def</span><span class="w"> </span><span class="nf">load_absolute_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-467"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a save from an absolute path. Takes a full path from the OS as a .jkr file and loads it into the game.</span>
</span><span id="__span-0-468">
</span><span id="__span-0-469"><span class="sd">    Args:</span>
</span><span id="__span-0-470"><span class="sd">        save_path: Path to the save file relative to Love2D save directory</span>
</span><span id="__span-0-471"><span class="sd">                  (e.g., &quot;3/save.jkr&quot; for profile 3&#39;s save)</span>
</span><span id="__span-0-472">
</span><span id="__span-0-473"><span class="sd">    Returns:</span>
</span><span id="__span-0-474"><span class="sd">        Game state after loading the save</span>
</span><span id="__span-0-475"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-476">    <span class="n">love_save_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_save</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span>
</span><span id="__span-0-477">    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_save</span><span class="p">(</span><span class="n">love_save_path</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.load_save" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_save</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Load a save file directly without requiring a game restart.</p>
<p>This method loads a save file (in Love2D's save directory format) and starts
a run from that save state. Unlike load_checkpoint which copies to the profile's
save location and requires restart, this directly loads the save into the game.</p>
<p>This is particularly useful for testing as it allows you to quickly jump to
specific game states without manual setup.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>save_path</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the save file relative to Love2D save directory
      (e.g., "3/save.jkr" for profile 3's save)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Game state after loading the save</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="balatrobot.exceptions.BalatroError">BalatroError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If save file not found or loading fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>This is a development tool that bypasses normal game flow.
Use with caution in production bots.</p>
</details>

<details class="example" open>
  <summary>Example</summary>
  <div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="c1"># Load a profile&#39;s save directly</span>
</span><span id="__span-0-2"><span class="n">game_state</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">load_save</span><span class="p">(</span><span class="s2">&quot;3/save.jkr&quot;</span><span class="p">)</span>
</span><span id="__span-0-3">
</span><span id="__span-0-4"><span class="c1"># Or use with prepare_save for external files</span>
</span><span id="__span-0-5"><span class="n">save_path</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">prepare_save</span><span class="p">(</span><span class="s2">&quot;tests/fixtures/shop_state.jkr&quot;</span><span class="p">)</span>
</span><span id="__span-0-6"><span class="n">game_state</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">load_save</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span>
</span></code></pre></div>
</details>

            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-425"><span class="k">def</span><span class="w"> </span><span class="nf">load_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-426"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a save file directly without requiring a game restart.</span>
</span><span id="__span-0-427">
</span><span id="__span-0-428"><span class="sd">    This method loads a save file (in Love2D&#39;s save directory format) and starts</span>
</span><span id="__span-0-429"><span class="sd">    a run from that save state. Unlike load_checkpoint which copies to the profile&#39;s</span>
</span><span id="__span-0-430"><span class="sd">    save location and requires restart, this directly loads the save into the game.</span>
</span><span id="__span-0-431">
</span><span id="__span-0-432"><span class="sd">    This is particularly useful for testing as it allows you to quickly jump to</span>
</span><span id="__span-0-433"><span class="sd">    specific game states without manual setup.</span>
</span><span id="__span-0-434">
</span><span id="__span-0-435"><span class="sd">    Args:</span>
</span><span id="__span-0-436"><span class="sd">        save_path: Path to the save file relative to Love2D save directory</span>
</span><span id="__span-0-437"><span class="sd">                  (e.g., &quot;3/save.jkr&quot; for profile 3&#39;s save)</span>
</span><span id="__span-0-438">
</span><span id="__span-0-439"><span class="sd">    Returns:</span>
</span><span id="__span-0-440"><span class="sd">        Game state after loading the save</span>
</span><span id="__span-0-441">
</span><span id="__span-0-442"><span class="sd">    Raises:</span>
</span><span id="__span-0-443"><span class="sd">        BalatroError: If save file not found or loading fails</span>
</span><span id="__span-0-444">
</span><span id="__span-0-445"><span class="sd">    Note:</span>
</span><span id="__span-0-446"><span class="sd">        This is a development tool that bypasses normal game flow.</span>
</span><span id="__span-0-447"><span class="sd">        Use with caution in production bots.</span>
</span><span id="__span-0-448">
</span><span id="__span-0-449"><span class="sd">    Example:</span>
</span><span id="__span-0-450"><span class="sd">        ```python</span>
</span><span id="__span-0-451"><span class="sd">        # Load a profile&#39;s save directly</span>
</span><span id="__span-0-452"><span class="sd">        game_state = client.load_save(&quot;3/save.jkr&quot;)</span>
</span><span id="__span-0-453">
</span><span id="__span-0-454"><span class="sd">        # Or use with prepare_save for external files</span>
</span><span id="__span-0-455"><span class="sd">        save_path = client.prepare_save(&quot;tests/fixtures/shop_state.jkr&quot;)</span>
</span><span id="__span-0-456"><span class="sd">        game_state = client.load_save(save_path)</span>
</span><span id="__span-0-457"><span class="sd">        ```</span>
</span><span id="__span-0-458"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-459">    <span class="c1"># Convert to string if Path object</span>
</span><span id="__span-0-460">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="__span-0-461">        <span class="n">save_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">save_path</span><span class="p">)</span>
</span><span id="__span-0-462">
</span><span id="__span-0-463">    <span class="c1"># Send load_save request to API</span>
</span><span id="__span-0-464">    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">&quot;load_save&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;save_path&quot;</span><span class="p">:</span> <span class="n">save_path</span><span class="p">})</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.prepare_save" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prepare_save</span><span class="p">(</span><span class="n">source_path</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Prepare a test save file for use with load_save.</p>
<p>This copies a .jkr file from your test directory into Love2D's save directory
in a temporary profile so it can be loaded with load_save().</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source_path</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the .jkr save file to prepare</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Love2D-relative path to use with load_save()</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(e.g., "checkpoint/save.jkr")</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="balatrobot.exceptions.BalatroError">BalatroError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If source file not found</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="IOError">IOError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If file operations fail</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-383"><span class="k">def</span><span class="w"> </span><span class="nf">prepare_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-384"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Prepare a test save file for use with load_save.</span>
</span><span id="__span-0-385">
</span><span id="__span-0-386"><span class="sd">    This copies a .jkr file from your test directory into Love2D&#39;s save directory</span>
</span><span id="__span-0-387"><span class="sd">    in a temporary profile so it can be loaded with load_save().</span>
</span><span id="__span-0-388">
</span><span id="__span-0-389"><span class="sd">    Args:</span>
</span><span id="__span-0-390"><span class="sd">        source_path: Path to the .jkr save file to prepare</span>
</span><span id="__span-0-391">
</span><span id="__span-0-392"><span class="sd">    Returns:</span>
</span><span id="__span-0-393"><span class="sd">        The Love2D-relative path to use with load_save()</span>
</span><span id="__span-0-394"><span class="sd">        (e.g., &quot;checkpoint/save.jkr&quot;)</span>
</span><span id="__span-0-395">
</span><span id="__span-0-396"><span class="sd">    Raises:</span>
</span><span id="__span-0-397"><span class="sd">        BalatroError: If source file not found</span>
</span><span id="__span-0-398"><span class="sd">        IOError: If file operations fail</span>
</span><span id="__span-0-399"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-400">    <span class="n">source</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">source_path</span><span class="p">)</span>
</span><span id="__span-0-401">    <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="__span-0-402">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-403">            <span class="sa">f</span><span class="s2">&quot;Source save file not found: </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">MISSING_GAME_OBJECT</span>
</span><span id="__span-0-404">        <span class="p">)</span>
</span><span id="__span-0-405">
</span><span id="__span-0-406">    <span class="c1"># Get save directory info</span>
</span><span id="__span-0-407">    <span class="n">save_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_save_info</span><span class="p">()</span>
</span><span id="__span-0-408">    <span class="k">if</span> <span class="ow">not</span> <span class="n">save_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;save_directory&quot;</span><span class="p">):</span>
</span><span id="__span-0-409">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-410">            <span class="s2">&quot;Cannot determine Love2D save directory&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_GAME_STATE</span>
</span><span id="__span-0-411">        <span class="p">)</span>
</span><span id="__span-0-412">
</span><span id="__span-0-413">    <span class="n">checkpoints_profile</span> <span class="o">=</span> <span class="s2">&quot;checkpoint&quot;</span>
</span><span id="__span-0-414">    <span class="n">save_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_directory&quot;</span><span class="p">])</span>
</span><span id="__span-0-415">    <span class="n">checkpoints_dir</span> <span class="o">=</span> <span class="n">save_dir</span> <span class="o">/</span> <span class="n">checkpoints_profile</span>
</span><span id="__span-0-416">    <span class="n">checkpoints_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-417">
</span><span id="__span-0-418">    <span class="c1"># Copy the save file to the test profile</span>
</span><span id="__span-0-419">    <span class="n">dest_path</span> <span class="o">=</span> <span class="n">checkpoints_dir</span> <span class="o">/</span> <span class="s2">&quot;save.jkr&quot;</span>
</span><span id="__span-0-420">    <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">)</span>
</span><span id="__span-0-421">
</span><span id="__span-0-422">    <span class="c1"># Return the Love2D-relative path</span>
</span><span id="__span-0-423">    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">checkpoints_profile</span><span class="si">}</span><span class="s2">/save.jkr&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.save_checkpoint" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_checkpoint</span><span class="p">(</span><span class="n">checkpoint_name</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Save the current save.jkr file as a checkpoint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>checkpoint_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Either:
- A checkpoint name (saved to checkpoints dir)
- A full file path where the checkpoint should be saved
- A directory path (checkpoint will be saved as 'save.jkr' inside it)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the saved checkpoint file</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="balatrobot.exceptions.BalatroError">BalatroError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no save file exists or the destination path is invalid</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="IOError">IOError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If file operations fail</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-321"><span class="k">def</span><span class="w"> </span><span class="nf">save_checkpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkpoint_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="__span-0-322"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the current save.jkr file as a checkpoint.</span>
</span><span id="__span-0-323">
</span><span id="__span-0-324"><span class="sd">    Args:</span>
</span><span id="__span-0-325"><span class="sd">        checkpoint_name: Either:</span>
</span><span id="__span-0-326"><span class="sd">            - A checkpoint name (saved to checkpoints dir)</span>
</span><span id="__span-0-327"><span class="sd">            - A full file path where the checkpoint should be saved</span>
</span><span id="__span-0-328"><span class="sd">            - A directory path (checkpoint will be saved as &#39;save.jkr&#39; inside it)</span>
</span><span id="__span-0-329">
</span><span id="__span-0-330"><span class="sd">    Returns:</span>
</span><span id="__span-0-331"><span class="sd">        Path to the saved checkpoint file</span>
</span><span id="__span-0-332">
</span><span id="__span-0-333"><span class="sd">    Raises:</span>
</span><span id="__span-0-334"><span class="sd">        BalatroError: If no save file exists or the destination path is invalid</span>
</span><span id="__span-0-335"><span class="sd">        IOError: If file operations fail</span>
</span><span id="__span-0-336"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-337">    <span class="c1"># Get current save info</span>
</span><span id="__span-0-338">    <span class="n">save_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_save_info</span><span class="p">()</span>
</span><span id="__span-0-339">    <span class="k">if</span> <span class="ow">not</span> <span class="n">save_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;save_exists&quot;</span><span class="p">):</span>
</span><span id="__span-0-340">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-341">            <span class="s2">&quot;No save file exists to checkpoint&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_GAME_STATE</span>
</span><span id="__span-0-342">        <span class="p">)</span>
</span><span id="__span-0-343">
</span><span id="__span-0-344">    <span class="c1"># Get the full save file path from API (already OS-specific)</span>
</span><span id="__span-0-345">    <span class="n">save_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">save_info</span><span class="p">[</span><span class="s2">&quot;save_file_path&quot;</span><span class="p">])</span>
</span><span id="__span-0-346">    <span class="k">if</span> <span class="ow">not</span> <span class="n">save_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="__span-0-347">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-348">            <span class="sa">f</span><span class="s2">&quot;Save file not found: </span><span class="si">{</span><span class="n">save_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ErrorCode</span><span class="o">.</span><span class="n">MISSING_GAME_OBJECT</span>
</span><span id="__span-0-349">        <span class="p">)</span>
</span><span id="__span-0-350">
</span><span id="__span-0-351">    <span class="c1"># Normalize and interpret destination</span>
</span><span id="__span-0-352">    <span class="n">dest</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">checkpoint_name</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="__span-0-353">    <span class="c1"># Treat paths without a .jkr suffix as directories</span>
</span><span id="__span-0-354">    <span class="k">if</span> <span class="n">dest</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;.jkr&quot;</span><span class="p">:</span>
</span><span id="__span-0-355">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-356">            <span class="sa">f</span><span class="s2">&quot;Invalid checkpoint path provided: </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-357">            <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_PARAMETER</span><span class="p">,</span>
</span><span id="__span-0-358">            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dest</span><span class="p">),</span> <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="s2">&quot;Path does not end with .jkr&quot;</span><span class="p">},</span>
</span><span id="__span-0-359">        <span class="p">)</span>
</span><span id="__span-0-360">
</span><span id="__span-0-361">    <span class="c1"># Ensure destination directory exists</span>
</span><span id="__span-0-362">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-363">        <span class="n">dest</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-364">    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-365">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-366">            <span class="sa">f</span><span class="s2">&quot;Invalid checkpoint path provided: </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-367">            <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_PARAMETER</span><span class="p">,</span>
</span><span id="__span-0-368">            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dest</span><span class="p">),</span> <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-369">        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-370">
</span><span id="__span-0-371">    <span class="c1"># Copy save file to checkpoint</span>
</span><span id="__span-0-372">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-373">        <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
</span><span id="__span-0-374">    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-375">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-376">            <span class="sa">f</span><span class="s2">&quot;Failed to write checkpoint to: </span><span class="si">{</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-377">            <span class="n">ErrorCode</span><span class="o">.</span><span class="n">INVALID_PARAMETER</span><span class="p">,</span>
</span><span id="__span-0-378">            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dest</span><span class="p">),</span> <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-379">        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-380">
</span><span id="__span-0-381">    <span class="k">return</span> <span class="n">dest</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.screenshot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">screenshot</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Take a screenshot and save as both PNG and JPEG formats.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional path for PNG file. If provided, PNG will be moved to this location.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the PNG screenshot. JPEG is saved alongside with .jpg extension.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>The response now includes both 'path' (PNG) and 'jpeg_path' (JPEG) keys.
This method maintains backward compatibility by returning the PNG path.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-479"><span class="k">def</span><span class="w"> </span><span class="nf">screenshot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
</span><span id="__span-0-480"><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-481"><span class="sd">    Take a screenshot and save as both PNG and JPEG formats.</span>
</span><span id="__span-0-482">
</span><span id="__span-0-483"><span class="sd">    Args:</span>
</span><span id="__span-0-484"><span class="sd">        path: Optional path for PNG file. If provided, PNG will be moved to this location.</span>
</span><span id="__span-0-485">
</span><span id="__span-0-486"><span class="sd">    Returns:</span>
</span><span id="__span-0-487"><span class="sd">        Path to the PNG screenshot. JPEG is saved alongside with .jpg extension.</span>
</span><span id="__span-0-488">
</span><span id="__span-0-489"><span class="sd">    Note:</span>
</span><span id="__span-0-490"><span class="sd">        The response now includes both &#39;path&#39; (PNG) and &#39;jpeg_path&#39; (JPEG) keys.</span>
</span><span id="__span-0-491"><span class="sd">        This method maintains backward compatibility by returning the PNG path.</span>
</span><span id="__span-0-492"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-493">    <span class="n">screenshot_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s2">&quot;screenshot&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="__span-0-494">
</span><span id="__span-0-495">    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-496">        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">screenshot_response</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>
</span><span id="__span-0-497">    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-498">        <span class="n">source_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">screenshot_response</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">])</span>
</span><span id="__span-0-499">        <span class="n">dest_path</span> <span class="o">=</span> <span class="n">path</span>
</span><span id="__span-0-500">        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">)</span>
</span><span id="__span-0-501">        <span class="k">return</span> <span class="n">dest_path</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="balatrobot.client.BalatroClient.send_message" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">send_message</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Send JSON message to Balatro and receive response</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function name to call</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>arguments</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Function arguments</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Response from the game API</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="balatrobot.exceptions.ConnectionFailedError" href="#balatrobot.exceptions.ConnectionFailedError">ConnectionFailedError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If not connected to the game</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="balatrobot.exceptions.BalatroError">BalatroError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the API returns an error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/balatrobot/client.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-158"><span class="k">def</span><span class="w"> </span><span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="__span-0-159"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Send JSON message to Balatro and receive response</span>
</span><span id="__span-0-160">
</span><span id="__span-0-161"><span class="sd">    Args:</span>
</span><span id="__span-0-162"><span class="sd">        name: Function name to call</span>
</span><span id="__span-0-163"><span class="sd">        arguments: Function arguments</span>
</span><span id="__span-0-164">
</span><span id="__span-0-165"><span class="sd">    Returns:</span>
</span><span id="__span-0-166"><span class="sd">        Response from the game API</span>
</span><span id="__span-0-167">
</span><span id="__span-0-168"><span class="sd">    Raises:</span>
</span><span id="__span-0-169"><span class="sd">        ConnectionFailedError: If not connected to the game</span>
</span><span id="__span-0-170"><span class="sd">        BalatroError: If the API returns an error</span>
</span><span id="__span-0-171"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-172">    <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-173">        <span class="n">arguments</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-0-174">
</span><span id="__span-0-175">    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span>
</span><span id="__span-0-176">        <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-177">            <span class="s2">&quot;Not connected to the game API&quot;</span><span class="p">,</span>
</span><span id="__span-0-178">            <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-179">            <span class="n">context</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-0-180">                <span class="s2">&quot;connected&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span><span class="p">,</span>
</span><span id="__span-0-181">                <span class="s2">&quot;socket&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-182">            <span class="p">},</span>
</span><span id="__span-0-183">        <span class="p">)</span>
</span><span id="__span-0-184">
</span><span id="__span-0-185">    <span class="c1"># Create and validate request</span>
</span><span id="__span-0-186">    <span class="n">request</span> <span class="o">=</span> <span class="n">APIRequest</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">)</span>
</span><span id="__span-0-187">    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending API request: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-188">
</span><span id="__span-0-189">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-190">        <span class="c1"># Start timing measurement</span>
</span><span id="__span-0-191">        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
</span><span id="__span-0-192">
</span><span id="__span-0-193">        <span class="c1"># Send request</span>
</span><span id="__span-0-194">        <span class="n">message</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-0-195">        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
</span><span id="__span-0-196">
</span><span id="__span-0-197">        <span class="c1"># Receive response using improved message handling</span>
</span><span id="__span-0-198">        <span class="n">complete_message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receive_complete_message</span><span class="p">()</span>
</span><span id="__span-0-199">
</span><span id="__span-0-200">        <span class="c1"># Decode and validate the message</span>
</span><span id="__span-0-201">        <span class="n">message_str</span> <span class="o">=</span> <span class="n">complete_message</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-0-202">        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw message length: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">message_str</span><span class="p">)</span><span class="si">}</span><span class="s2"> characters&quot;</span><span class="p">)</span>
</span><span id="__span-0-203">        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message preview: </span><span class="si">{</span><span class="n">message_str</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-0-204">
</span><span id="__span-0-205">        <span class="c1"># Ensure the message is properly formatted JSON</span>
</span><span id="__span-0-206">        <span class="k">if</span> <span class="ow">not</span> <span class="n">message_str</span><span class="p">:</span>
</span><span id="__span-0-207">            <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-208">                <span class="s2">&quot;Empty response received from game&quot;</span><span class="p">,</span>
</span><span id="__span-0-209">                <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E001&quot;</span><span class="p">,</span>
</span><span id="__span-0-210">                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;raw_data_length&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">complete_message</span><span class="p">)},</span>
</span><span id="__span-0-211">            <span class="p">)</span>
</span><span id="__span-0-212">
</span><span id="__span-0-213">        <span class="n">response_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">message_str</span><span class="p">)</span>
</span><span id="__span-0-214">
</span><span id="__span-0-215">        <span class="c1"># Check for error response</span>
</span><span id="__span-0-216">        <span class="k">if</span> <span class="s2">&quot;error&quot;</span> <span class="ow">in</span> <span class="n">response_data</span><span class="p">:</span>
</span><span id="__span-0-217">            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">response_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-218">            <span class="k">raise</span> <span class="n">create_exception_from_error_response</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>
</span><span id="__span-0-219">
</span><span id="__span-0-220">        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> completed successfully&quot;</span><span class="p">)</span>
</span><span id="__span-0-221">        <span class="k">return</span> <span class="n">response_data</span>
</span><span id="__span-0-222">
</span><span id="__span-0-223">    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-224">        <span class="c1"># Calculate elapsed time and log timeout</span>
</span><span id="__span-0-225">        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span><span id="__span-0-226">        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
</span><span id="__span-0-227">            <span class="sa">f</span><span class="s2">&quot;Timeout on API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: took </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">s, &quot;</span>
</span><span id="__span-0-228">            <span class="sa">f</span><span class="s2">&quot;exceeded timeout of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="si">}</span><span class="s2">s (port: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="__span-0-229">        <span class="p">)</span>
</span><span id="__span-0-230">        <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-231">            <span class="sa">f</span><span class="s2">&quot;Socket timeout during communication: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-232">            <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-233">            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;elapsed_time&quot;</span><span class="p">:</span> <span class="n">elapsed_time</span><span class="p">},</span>
</span><span id="__span-0-234">        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-235">    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-236">        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Socket error during API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-237">        <span class="k">raise</span> <span class="n">ConnectionFailedError</span><span class="p">(</span>
</span><span id="__span-0-238">            <span class="sa">f</span><span class="s2">&quot;Socket error during communication: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-239">            <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E008&quot;</span><span class="p">,</span>
</span><span id="__span-0-240">            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span>
</span><span id="__span-0-241">        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-242">    <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-243">        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid JSON response from API request </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-244">        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Problematic message content: </span><span class="si">{</span><span class="n">message_str</span><span class="p">[:</span><span class="mi">200</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
</span><span id="__span-0-245">        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="__span-0-246">            <span class="sa">f</span><span class="s2">&quot;Message buffer state: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">)</span><span class="si">}</span><span class="s2"> bytes remaining&quot;</span>
</span><span id="__span-0-247">        <span class="p">)</span>
</span><span id="__span-0-248">
</span><span id="__span-0-249">        <span class="c1"># Clear the message buffer to prevent cascading errors</span>
</span><span id="__span-0-250">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span><span class="p">:</span>
</span><span id="__span-0-251">            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Clearing message buffer due to JSON parse error&quot;</span><span class="p">)</span>
</span><span id="__span-0-252">            <span class="bp">self</span><span class="o">.</span><span class="n">_message_buffer</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-0-253">
</span><span id="__span-0-254">        <span class="k">raise</span> <span class="n">BalatroError</span><span class="p">(</span>
</span><span id="__span-0-255">            <span class="sa">f</span><span class="s2">&quot;Invalid JSON response from game: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="__span-0-256">            <span class="n">error_code</span><span class="o">=</span><span class="s2">&quot;E001&quot;</span><span class="p">,</span>
</span><span id="__span-0-257">            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;message_preview&quot;</span><span class="p">:</span> <span class="n">message_str</span><span class="p">[:</span><span class="mi">100</span><span class="p">]},</span>
</span><span id="__span-0-258">        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="enums">Enums</h2>


<div class="doc doc-object doc-class">



<h3 id="balatrobot.enums.State" class="doc doc-heading">
            <code>balatrobot.enums.State</code>


</h3>


    <div class="doc doc-contents first">


        <p>Game state values representing different phases of gameplay in Balatro,
from menu navigation to active card play and shop interactions.</p>







              <details class="quote">
                <summary>Source code in <code>src/balatrobot/enums.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-4"><span class="nd">@unique</span>
</span><span id="__span-0-5"><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-0-6"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Game state values representing different phases of gameplay in Balatro,</span>
</span><span id="__span-0-7"><span class="sd">    from menu navigation to active card play and shop interactions.&quot;&quot;&quot;</span>
</span><span id="__span-0-8">
</span><span id="__span-0-9">    <span class="n">SELECTING_HAND</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-0-10">    <span class="n">HAND_PLAYED</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-0-11">    <span class="n">DRAW_TO_HAND</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="__span-0-12">    <span class="n">GAME_OVER</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="__span-0-13">    <span class="n">SHOP</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="__span-0-14">    <span class="n">PLAY_TAROT</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="__span-0-15">    <span class="n">BLIND_SELECT</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="__span-0-16">    <span class="n">ROUND_EVAL</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="__span-0-17">    <span class="n">TAROT_PACK</span> <span class="o">=</span> <span class="mi">9</span>
</span><span id="__span-0-18">    <span class="n">PLANET_PACK</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="__span-0-19">    <span class="n">MENU</span> <span class="o">=</span> <span class="mi">11</span>
</span><span id="__span-0-20">    <span class="n">TUTORIAL</span> <span class="o">=</span> <span class="mi">12</span>
</span><span id="__span-0-21">    <span class="n">SPLASH</span> <span class="o">=</span> <span class="mi">13</span>
</span><span id="__span-0-22">    <span class="n">SANDBOX</span> <span class="o">=</span> <span class="mi">14</span>
</span><span id="__span-0-23">    <span class="n">SPECTRAL_PACK</span> <span class="o">=</span> <span class="mi">15</span>
</span><span id="__span-0-24">    <span class="n">DEMO_CTA</span> <span class="o">=</span> <span class="mi">16</span>
</span><span id="__span-0-25">    <span class="n">STANDARD_PACK</span> <span class="o">=</span> <span class="mi">17</span>
</span><span id="__span-0-26">    <span class="n">BUFFOON_PACK</span> <span class="o">=</span> <span class="mi">18</span>
</span><span id="__span-0-27">    <span class="n">NEW_ROUND</span> <span class="o">=</span> <span class="mi">19</span>
</span></code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="balatrobot.enums.Actions" class="doc doc-heading">
            <code>balatrobot.enums.Actions</code>


</h3>


    <div class="doc doc-contents first">


        <p>Bot action values corresponding to user interactions available in
different game states, from card play to shop purchases and inventory
management.</p>







              <details class="quote">
                <summary>Source code in <code>src/balatrobot/enums.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-30"><span class="nd">@unique</span>
</span><span id="__span-0-31"><span class="k">class</span><span class="w"> </span><span class="nc">Actions</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-0-32"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Bot action values corresponding to user interactions available in</span>
</span><span id="__span-0-33"><span class="sd">    different game states, from card play to shop purchases and inventory</span>
</span><span id="__span-0-34"><span class="sd">    management.&quot;&quot;&quot;</span>
</span><span id="__span-0-35">
</span><span id="__span-0-36">    <span class="n">SELECT_BLIND</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-0-37">    <span class="n">SKIP_BLIND</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-0-38">    <span class="n">PLAY_HAND</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="__span-0-39">    <span class="n">DISCARD_HAND</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="__span-0-40">    <span class="n">END_SHOP</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="__span-0-41">    <span class="n">REROLL_SHOP</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="__span-0-42">    <span class="n">BUY_CARD</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="__span-0-43">    <span class="n">BUY_VOUCHER</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="__span-0-44">    <span class="n">BUY_BOOSTER</span> <span class="o">=</span> <span class="mi">9</span>
</span><span id="__span-0-45">    <span class="n">SELECT_BOOSTER_CARD</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="__span-0-46">    <span class="n">SKIP_BOOSTER_PACK</span> <span class="o">=</span> <span class="mi">11</span>
</span><span id="__span-0-47">    <span class="n">SELL_JOKER</span> <span class="o">=</span> <span class="mi">12</span>
</span><span id="__span-0-48">    <span class="n">USE_CONSUMABLE</span> <span class="o">=</span> <span class="mi">13</span>
</span><span id="__span-0-49">    <span class="n">SELL_CONSUMABLE</span> <span class="o">=</span> <span class="mi">14</span>
</span><span id="__span-0-50">    <span class="n">REARRANGE_JOKERS</span> <span class="o">=</span> <span class="mi">15</span>
</span><span id="__span-0-51">    <span class="n">REARRANGE_CONSUMABLES</span> <span class="o">=</span> <span class="mi">16</span>
</span><span id="__span-0-52">    <span class="n">REARRANGE_HAND</span> <span class="o">=</span> <span class="mi">17</span>
</span><span id="__span-0-53">    <span class="n">PASS</span> <span class="o">=</span> <span class="mi">18</span>
</span><span id="__span-0-54">    <span class="n">START_RUN</span> <span class="o">=</span> <span class="mi">19</span>
</span><span id="__span-0-55">    <span class="n">SEND_GAMESTATE</span> <span class="o">=</span> <span class="mi">20</span>
</span></code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="balatrobot.enums.Decks" class="doc doc-heading">
            <code>balatrobot.enums.Decks</code>


</h3>


    <div class="doc doc-contents first">


        <p>Starting deck types in Balatro, each providing unique starting
conditions, card modifications, or special abilities that affect gameplay
throughout the run.</p>







              <details class="quote">
                <summary>Source code in <code>src/balatrobot/enums.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-58"><span class="nd">@unique</span>
</span><span id="__span-0-59"><span class="k">class</span><span class="w"> </span><span class="nc">Decks</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-0-60"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Starting deck types in Balatro, each providing unique starting</span>
</span><span id="__span-0-61"><span class="sd">    conditions, card modifications, or special abilities that affect gameplay</span>
</span><span id="__span-0-62"><span class="sd">    throughout the run.&quot;&quot;&quot;</span>
</span><span id="__span-0-63">
</span><span id="__span-0-64">    <span class="n">RED</span> <span class="o">=</span> <span class="s2">&quot;Red Deck&quot;</span>
</span><span id="__span-0-65">    <span class="n">BLUE</span> <span class="o">=</span> <span class="s2">&quot;Blue Deck&quot;</span>
</span><span id="__span-0-66">    <span class="n">YELLOW</span> <span class="o">=</span> <span class="s2">&quot;Yellow Deck&quot;</span>
</span><span id="__span-0-67">    <span class="n">GREEN</span> <span class="o">=</span> <span class="s2">&quot;Green Deck&quot;</span>
</span><span id="__span-0-68">    <span class="n">BLACK</span> <span class="o">=</span> <span class="s2">&quot;Black Deck&quot;</span>
</span><span id="__span-0-69">    <span class="n">MAGIC</span> <span class="o">=</span> <span class="s2">&quot;Magic Deck&quot;</span>
</span><span id="__span-0-70">    <span class="n">NEBULA</span> <span class="o">=</span> <span class="s2">&quot;Nebula Deck&quot;</span>
</span><span id="__span-0-71">    <span class="n">GHOST</span> <span class="o">=</span> <span class="s2">&quot;Ghost Deck&quot;</span>
</span><span id="__span-0-72">    <span class="n">ABANDONED</span> <span class="o">=</span> <span class="s2">&quot;Abandoned Deck&quot;</span>
</span><span id="__span-0-73">    <span class="n">CHECKERED</span> <span class="o">=</span> <span class="s2">&quot;Checkered Deck&quot;</span>
</span><span id="__span-0-74">    <span class="n">ZODIAC</span> <span class="o">=</span> <span class="s2">&quot;Zodiac Deck&quot;</span>
</span><span id="__span-0-75">    <span class="n">PAINTED</span> <span class="o">=</span> <span class="s2">&quot;Painted Deck&quot;</span>
</span><span id="__span-0-76">    <span class="n">ANAGLYPH</span> <span class="o">=</span> <span class="s2">&quot;Anaglyph Deck&quot;</span>
</span><span id="__span-0-77">    <span class="n">PLASMA</span> <span class="o">=</span> <span class="s2">&quot;Plasma Deck&quot;</span>
</span><span id="__span-0-78">    <span class="n">ERRATIC</span> <span class="o">=</span> <span class="s2">&quot;Erratic Deck&quot;</span>
</span></code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="balatrobot.enums.Stakes" class="doc doc-heading">
            <code>balatrobot.enums.Stakes</code>


</h3>


    <div class="doc doc-contents first">


        <p>Difficulty stake levels in Balatro that increase game difficulty through
various modifiers and restrictions, with higher stakes providing greater
challenges and rewards.</p>







              <details class="quote">
                <summary>Source code in <code>src/balatrobot/enums.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-81"><span class="nd">@unique</span>
</span><span id="__span-0-82"><span class="k">class</span><span class="w"> </span><span class="nc">Stakes</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-0-83"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Difficulty stake levels in Balatro that increase game difficulty through</span>
</span><span id="__span-0-84"><span class="sd">    various modifiers and restrictions, with higher stakes providing greater</span>
</span><span id="__span-0-85"><span class="sd">    challenges and rewards.&quot;&quot;&quot;</span>
</span><span id="__span-0-86">
</span><span id="__span-0-87">    <span class="n">WHITE</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-0-88">    <span class="n">RED</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="__span-0-89">    <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="__span-0-90">    <span class="n">BLACK</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="__span-0-91">    <span class="n">BLUE</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="__span-0-92">    <span class="n">PURPLE</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="__span-0-93">    <span class="n">ORANGE</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="__span-0-94">    <span class="n">GOLD</span> <span class="o">=</span> <span class="mi">8</span>
</span></code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="balatrobot.enums.ErrorCode" class="doc doc-heading">
            <code>balatrobot.enums.ErrorCode</code>


</h3>


    <div class="doc doc-contents first">


        <p>Standardized error codes used in BalatroBot API that match those defined in src/lua/api.lua for consistent error handling across the entire system.</p>







              <details class="quote">
                <summary>Source code in <code>src/balatrobot/enums.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-97"><span class="nd">@unique</span>
</span><span id="__span-0-98"><span class="k">class</span><span class="w"> </span><span class="nc">ErrorCode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="__span-0-99"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Standardized error codes used in BalatroBot API that match those defined in src/lua/api.lua for consistent error handling across the entire system.&quot;&quot;&quot;</span>
</span><span id="__span-0-100">
</span><span id="__span-0-101">    <span class="c1"># Protocol errors (E001-E005)</span>
</span><span id="__span-0-102">    <span class="n">INVALID_JSON</span> <span class="o">=</span> <span class="s2">&quot;E001&quot;</span>
</span><span id="__span-0-103">    <span class="n">MISSING_NAME</span> <span class="o">=</span> <span class="s2">&quot;E002&quot;</span>
</span><span id="__span-0-104">    <span class="n">MISSING_ARGUMENTS</span> <span class="o">=</span> <span class="s2">&quot;E003&quot;</span>
</span><span id="__span-0-105">    <span class="n">UNKNOWN_FUNCTION</span> <span class="o">=</span> <span class="s2">&quot;E004&quot;</span>
</span><span id="__span-0-106">    <span class="n">INVALID_ARGUMENTS</span> <span class="o">=</span> <span class="s2">&quot;E005&quot;</span>
</span><span id="__span-0-107">
</span><span id="__span-0-108">    <span class="c1"># Network errors (E006-E008)</span>
</span><span id="__span-0-109">    <span class="n">SOCKET_CREATE_FAILED</span> <span class="o">=</span> <span class="s2">&quot;E006&quot;</span>
</span><span id="__span-0-110">    <span class="n">SOCKET_BIND_FAILED</span> <span class="o">=</span> <span class="s2">&quot;E007&quot;</span>
</span><span id="__span-0-111">    <span class="n">CONNECTION_FAILED</span> <span class="o">=</span> <span class="s2">&quot;E008&quot;</span>
</span><span id="__span-0-112">
</span><span id="__span-0-113">    <span class="c1"># Validation errors (E009-E012)</span>
</span><span id="__span-0-114">    <span class="n">INVALID_GAME_STATE</span> <span class="o">=</span> <span class="s2">&quot;E009&quot;</span>
</span><span id="__span-0-115">    <span class="n">INVALID_PARAMETER</span> <span class="o">=</span> <span class="s2">&quot;E010&quot;</span>
</span><span id="__span-0-116">    <span class="n">PARAMETER_OUT_OF_RANGE</span> <span class="o">=</span> <span class="s2">&quot;E011&quot;</span>
</span><span id="__span-0-117">    <span class="n">MISSING_GAME_OBJECT</span> <span class="o">=</span> <span class="s2">&quot;E012&quot;</span>
</span><span id="__span-0-118">
</span><span id="__span-0-119">    <span class="c1"># Game logic errors (E013-E016)</span>
</span><span id="__span-0-120">    <span class="n">DECK_NOT_FOUND</span> <span class="o">=</span> <span class="s2">&quot;E013&quot;</span>
</span><span id="__span-0-121">    <span class="n">INVALID_CARD_INDEX</span> <span class="o">=</span> <span class="s2">&quot;E014&quot;</span>
</span><span id="__span-0-122">    <span class="n">NO_DISCARDS_LEFT</span> <span class="o">=</span> <span class="s2">&quot;E015&quot;</span>
</span><span id="__span-0-123">    <span class="n">INVALID_ACTION</span> <span class="o">=</span> <span class="s2">&quot;E016&quot;</span>
</span></code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div><hr />
<h2 id="exceptions">Exceptions</h2>
<h3 id="connection-and-socket-errors">Connection and Socket Errors</h3>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.SocketCreateFailedError" class="doc doc-heading">
            <code>balatrobot.exceptions.SocketCreateFailedError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Socket creation failed (E006).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.SocketBindFailedError" class="doc doc-heading">
            <code>balatrobot.exceptions.SocketBindFailedError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Socket bind failed (E007).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.ConnectionFailedError" class="doc doc-heading">
            <code>balatrobot.exceptions.ConnectionFailedError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Connection failed (E008).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="game-state-and-logic-errors">Game State and Logic Errors</h3>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.InvalidGameStateError" class="doc doc-heading">
            <code>balatrobot.exceptions.InvalidGameStateError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Invalid game state for requested action (E009).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.InvalidActionError" class="doc doc-heading">
            <code>balatrobot.exceptions.InvalidActionError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Invalid action for current context (E016).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.DeckNotFoundError" class="doc doc-heading">
            <code>balatrobot.exceptions.DeckNotFoundError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Deck not found (E013).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.InvalidCardIndexError" class="doc doc-heading">
            <code>balatrobot.exceptions.InvalidCardIndexError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Invalid card index (E014).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.NoDiscardsLeftError" class="doc doc-heading">
            <code>balatrobot.exceptions.NoDiscardsLeftError</code>


</h4>


    <div class="doc doc-contents first">


        <p>No discards remaining (E015).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="api-and-parameter-errors">API and Parameter Errors</h3>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.InvalidJSONError" class="doc doc-heading">
            <code>balatrobot.exceptions.InvalidJSONError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Invalid JSON in request (E001).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.MissingNameError" class="doc doc-heading">
            <code>balatrobot.exceptions.MissingNameError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Message missing required 'name' field (E002).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.MissingArgumentsError" class="doc doc-heading">
            <code>balatrobot.exceptions.MissingArgumentsError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Message missing required 'arguments' field (E003).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.UnknownFunctionError" class="doc doc-heading">
            <code>balatrobot.exceptions.UnknownFunctionError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Unknown function name (E004).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.InvalidArgumentsError" class="doc doc-heading">
            <code>balatrobot.exceptions.InvalidArgumentsError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Invalid arguments provided (E005).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.InvalidParameterError" class="doc doc-heading">
            <code>balatrobot.exceptions.InvalidParameterError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Invalid or missing required parameter (E010).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.ParameterOutOfRangeError" class="doc doc-heading">
            <code>balatrobot.exceptions.ParameterOutOfRangeError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Parameter value out of valid range (E011).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.exceptions.MissingGameObjectError" class="doc doc-heading">
            <code>balatrobot.exceptions.MissingGameObjectError</code>


</h4>


    <div class="doc doc-contents first">


        <p>Required game object missing (E012).</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><hr />
<h2 id="models">Models</h2>
<p>The BalatroBot API uses Pydantic models to provide type-safe data structures that exactly match the game's internal state representation. All models inherit from <code>BalatroBaseModel</code> which provides consistent validation and serialization.</p>
<h4 id="base-model">Base Model</h4>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.BalatroBaseModel" class="doc doc-heading">
            <code>balatrobot.models.BalatroBaseModel</code>


</h4>


    <div class="doc doc-contents first">


        <p>Base model for all BalatroBot API models.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="request-models">Request Models</h3>
<p>These models define the structure for specific API requests:</p>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.StartRunRequest" class="doc doc-heading">
            <code>balatrobot.models.StartRunRequest</code>


</h4>


    <div class="doc doc-contents first">


        <p>Request model for starting a new run.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.BlindActionRequest" class="doc doc-heading">
            <code>balatrobot.models.BlindActionRequest</code>


</h4>


    <div class="doc doc-contents first">


        <p>Request model for skip or select blind actions.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.HandActionRequest" class="doc doc-heading">
            <code>balatrobot.models.HandActionRequest</code>


</h4>


    <div class="doc doc-contents first">


        <p>Request model for playing hand or discarding cards.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.ShopActionRequest" class="doc doc-heading">
            <code>balatrobot.models.ShopActionRequest</code>


</h4>


    <div class="doc doc-contents first">


        <p>Request model for shop actions.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="game-state-models">Game State Models</h3>
<p>The game state models provide comprehensive access to all Balatro game information, structured hierarchically to match the Lua API:</p>
<h4 id="root-game-state">Root Game State</h4>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.G" class="doc doc-heading">
            <code>balatrobot.models.G</code>


</h4>


    <div class="doc doc-contents first">


        <p>Root game state response matching G in Lua types.</p>










  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="balatrobot.models.G.state_enum" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">state_enum</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">

        <p>Get the state as an enum value.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="balatrobot.models.G.convert_empty_list_to_none_for_hand" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_empty_list_to_none_for_hand</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">

        <p>Convert empty list to None for hand field.</p>


    </div>

</div>



  </div>

    </div>

</div><h4 id="game-information">Game Information</h4>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGame" class="doc doc-heading">
            <code>balatrobot.models.GGame</code>


</h4>


    <div class="doc doc-contents first">


        <p>Game state matching GGame in Lua types.</p>










  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="balatrobot.models.GGame.convert_empty_list_to_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_empty_list_to_dict</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">

        <p>Convert empty list to empty dict.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="balatrobot.models.GGame.convert_empty_list_to_none" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_empty_list_to_none</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">

        <p>Convert empty list to None for optional nested objects.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameCurrentRound" class="doc doc-heading">
            <code>balatrobot.models.GGameCurrentRound</code>


</h4>


    <div class="doc doc-contents first">


        <p>Current round info matching GGameCurrentRound in Lua types.</p>










  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="balatrobot.models.GGameCurrentRound.convert_empty_list_to_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_empty_list_to_dict</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">

        <p>Convert empty list to empty dict.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameLastBlind" class="doc doc-heading">
            <code>balatrobot.models.GGameLastBlind</code>


</h4>


    <div class="doc doc-contents first">


        <p>Last blind info matching GGameLastBlind in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGamePreviousRound" class="doc doc-heading">
            <code>balatrobot.models.GGamePreviousRound</code>


</h4>


    <div class="doc doc-contents first">


        <p>Previous round info matching GGamePreviousRound in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameProbabilities" class="doc doc-heading">
            <code>balatrobot.models.GGameProbabilities</code>


</h4>


    <div class="doc doc-contents first">


        <p>Game probabilities matching GGameProbabilities in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGamePseudorandom" class="doc doc-heading">
            <code>balatrobot.models.GGamePseudorandom</code>


</h4>


    <div class="doc doc-contents first">


        <p>Pseudorandom data matching GGamePseudorandom in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameRoundBonus" class="doc doc-heading">
            <code>balatrobot.models.GGameRoundBonus</code>


</h4>


    <div class="doc doc-contents first">


        <p>Round bonus matching GGameRoundBonus in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameRoundScores" class="doc doc-heading">
            <code>balatrobot.models.GGameRoundScores</code>


</h4>


    <div class="doc doc-contents first">


        <p>Round scores matching GGameRoundScores in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameSelectedBack" class="doc doc-heading">
            <code>balatrobot.models.GGameSelectedBack</code>


</h4>


    <div class="doc doc-contents first">


        <p>Selected deck info matching GGameSelectedBack in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameShop" class="doc doc-heading">
            <code>balatrobot.models.GGameShop</code>


</h4>


    <div class="doc doc-contents first">


        <p>Shop configuration matching GGameShop in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameStartingParams" class="doc doc-heading">
            <code>balatrobot.models.GGameStartingParams</code>


</h4>


    <div class="doc doc-contents first">


        <p>Starting parameters matching GGameStartingParams in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GGameTags" class="doc doc-heading">
            <code>balatrobot.models.GGameTags</code>


</h4>


    <div class="doc doc-contents first">


        <p>Game tags model matching GGameTags in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h4 id="hand-management">Hand Management</h4>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GHand" class="doc doc-heading">
            <code>balatrobot.models.GHand</code>


</h4>


    <div class="doc doc-contents first">


        <p>Hand structure matching GHand in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GHandCards" class="doc doc-heading">
            <code>balatrobot.models.GHandCards</code>


</h4>


    <div class="doc doc-contents first">


        <p>Hand card matching GHandCards in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GHandCardsBase" class="doc doc-heading">
            <code>balatrobot.models.GHandCardsBase</code>


</h4>


    <div class="doc doc-contents first">


        <p>Hand card base properties matching GHandCardsBase in Lua types.</p>










  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h5 id="balatrobot.models.GHandCardsBase.convert_int_to_string" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_int_to_string</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">

        <p>Convert integer values to strings.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GHandCardsConfig" class="doc doc-heading">
            <code>balatrobot.models.GHandCardsConfig</code>


</h4>


    <div class="doc doc-contents first">


        <p>Hand card configuration matching GHandCardsConfig in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GHandCardsConfigCard" class="doc doc-heading">
            <code>balatrobot.models.GHandCardsConfigCard</code>


</h4>


    <div class="doc doc-contents first">


        <p>Hand card config card data matching GHandCardsConfigCard in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GHandConfig" class="doc doc-heading">
            <code>balatrobot.models.GHandConfig</code>


</h4>


    <div class="doc doc-contents first">


        <p>Hand configuration matching GHandConfig in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h4 id="joker-information">Joker Information</h4>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GJokersCards" class="doc doc-heading">
            <code>balatrobot.models.GJokersCards</code>


</h4>


    <div class="doc doc-contents first">


        <p>Joker card matching GJokersCards in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.GJokersCardsConfig" class="doc doc-heading">
            <code>balatrobot.models.GJokersCardsConfig</code>


</h4>


    <div class="doc doc-contents first">


        <p>Joker card configuration matching GJokersCardsConfig in Lua types.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="communication-models">Communication Models</h3>
<p>These models handle the communication protocol between your bot and the game:</p>


<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.APIRequest" class="doc doc-heading">
            <code>balatrobot.models.APIRequest</code>


</h4>


    <div class="doc doc-contents first">


        <p>Model for API requests sent to the game.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.APIResponse" class="doc doc-heading">
            <code>balatrobot.models.APIResponse</code>


</h4>


    <div class="doc doc-contents first">


        <p>Model for API responses from the game.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.ErrorResponse" class="doc doc-heading">
            <code>balatrobot.models.ErrorResponse</code>


</h4>


    <div class="doc doc-contents first">


        <p>Model for API error responses matching Lua ErrorResponse.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="balatrobot.models.JSONLLogEntry" class="doc doc-heading">
            <code>balatrobot.models.JSONLLogEntry</code>


</h4>


    <div class="doc doc-contents first">


        <p>Model for JSONL log entries that record game actions.</p>










  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="usage-examples">Usage Examples</h2>
<p>For practical implementation examples:</p>
<ul>
<li>Follow the <a href="../developing-bots/">Developing Bots</a> guide for complete bot setup</li>
<li>Understand the underlying <a href="../protocol-api/">Protocol API</a> for advanced usage</li>
<li>Reference the <a href="../installation/">Installation</a> guide for environment setup</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.tabs.link"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>